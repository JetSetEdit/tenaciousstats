{"data":"aW1wb3J0IG9zCmZyb20gZ29vZ2xlLmFuYWx5dGljcy5kYXRhX3YxYmV0YSBpbXBvcnQgQmV0YUFuYWx5dGljc0RhdGFDbGllbnQKZnJvbSBnb29nbGUuYW5hbHl0aWNzLmRhdGFfdjFiZXRhLnR5cGVzIGltcG9ydCBHZXRNZXRhZGF0YVJlcXVlc3QKaW1wb3J0IGpzb24KCiMgQ09ORklHVVJBVElPTgpQUk9QRVJUWV9JRCA9ICczNjgwMzU5MzQnCkNSRURFTlRJQUxTX0ZJTEUgPSAnY3JlZGVudGlhbHMuanNvbicKCiMgU2V0IGNyZWRlbnRpYWxzIGlmIGZpbGUgZXhpc3RzCmlmIG9zLnBhdGguZXhpc3RzKENSRURFTlRJQUxTX0ZJTEUpOgogICAgb3MuZW52aXJvblsnR09PR0xFX0FQUExJQ0FUSU9OX0NSRURFTlRJQUxTJ10gPSBDUkVERU5USUFMU19GSUxFCgpkZWYgbGlzdF9tZXRhZGF0YSgpOgogICAgIiIiTGlzdHMgYWxsIGF2YWlsYWJsZSBkaW1lbnNpb25zIGFuZCBtZXRyaWNzIGZyb20gR0E0LiIiIgogICAgdHJ5OgogICAgICAgIGNsaWVudCA9IEJldGFBbmFseXRpY3NEYXRhQ2xpZW50KCkKICAgICAgICBwcmludCgiQXV0aGVudGljYXRlZCBzdWNjZXNzZnVsbHkuXG4iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiQXV0aGVudGljYXRpb24gZmFpbGVkOiB7ZX0iKQogICAgICAgIHJldHVybgoKICAgICMgR2V0IG1ldGFkYXRhIGZvciBkaW1lbnNpb25zIGFuZCBtZXRyaWNzCiAgICByZXF1ZXN0ID0gR2V0TWV0YWRhdGFSZXF1ZXN0KAogICAgICAgIG5hbWU9ZiJwcm9wZXJ0aWVzL3tQUk9QRVJUWV9JRH0vbWV0YWRhdGEiCiAgICApCiAgICAKICAgIHRyeToKICAgICAgICBtZXRhZGF0YSA9IGNsaWVudC5nZXRfbWV0YWRhdGEocmVxdWVzdD1yZXF1ZXN0KQogICAgICAgIAogICAgICAgIHByaW50KCI9IiAqIDgwKQogICAgICAgIHByaW50KCJBVkFJTEFCTEUgRElNRU5TSU9OUyIpCiAgICAgICAgcHJpbnQoIj0iICogODApCiAgICAgICAgcHJpbnQoZiJcblRvdGFsIERpbWVuc2lvbnM6IHtsZW4obWV0YWRhdGEuZGltZW5zaW9ucyl9XG4iKQogICAgICAgIAogICAgICAgICMgR3JvdXAgZGltZW5zaW9ucyBieSBjYXRlZ29yeQogICAgICAgIGRpbWVuc2lvbnNfYnlfY2F0ZWdvcnkgPSB7fQogICAgICAgIGZvciBkaW0gaW4gbWV0YWRhdGEuZGltZW5zaW9uczoKICAgICAgICAgICAgY2F0ZWdvcnkgPSBkaW0uY2F0ZWdvcnkgaWYgZGltLmNhdGVnb3J5IGVsc2UgIlVuY2F0ZWdvcml6ZWQiCiAgICAgICAgICAgIGlmIGNhdGVnb3J5IG5vdCBpbiBkaW1lbnNpb25zX2J5X2NhdGVnb3J5OgogICAgICAgICAgICAgICAgZGltZW5zaW9uc19ieV9jYXRlZ29yeVtjYXRlZ29yeV0gPSBbXQogICAgICAgICAgICBkaW1lbnNpb25zX2J5X2NhdGVnb3J5W2NhdGVnb3J5XS5hcHBlbmQoewogICAgICAgICAgICAgICAgJ2FwaV9uYW1lJzogZGltLmFwaV9uYW1lLAogICAgICAgICAgICAgICAgJ3VpX25hbWUnOiBkaW0udWlfbmFtZSwKICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IGRpbS5kZXNjcmlwdGlvbgogICAgICAgICAgICB9KQogICAgICAgIAogICAgICAgIGZvciBjYXRlZ29yeSwgZGltcyBpbiBzb3J0ZWQoZGltZW5zaW9uc19ieV9jYXRlZ29yeS5pdGVtcygpKToKICAgICAgICAgICAgcHJpbnQoZiJcblt7Y2F0ZWdvcnl9XSIpCiAgICAgICAgICAgIHByaW50KCItIiAqIDgwKQogICAgICAgICAgICBmb3IgZGltIGluIHNvcnRlZChkaW1zLCBrZXk9bGFtYmRhIHg6IHhbJ2FwaV9uYW1lJ10pOgogICAgICAgICAgICAgICAgcHJpbnQoZiIgIHtkaW1bJ2FwaV9uYW1lJ106NDB9IHwge2RpbVsndWlfbmFtZSddfSIpCiAgICAgICAgICAgICAgICBpZiBkaW1bJ2Rlc2NyaXB0aW9uJ106CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiIgICAgLT4ge2RpbVsnZGVzY3JpcHRpb24nXVs6NzBdfSIpCiAgICAgICAgCiAgICAgICAgcHJpbnQoIlxuIiArICI9IiAqIDgwKQogICAgICAgIHByaW50KCJBVkFJTEFCTEUgTUVUUklDUyIpCiAgICAgICAgcHJpbnQoIj0iICogODApCiAgICAgICAgcHJpbnQoZiJcblRvdGFsIE1ldHJpY3M6IHtsZW4obWV0YWRhdGEubWV0cmljcyl9XG4iKQogICAgICAgIAogICAgICAgICMgR3JvdXAgbWV0cmljcyBieSBjYXRlZ29yeQogICAgICAgIG1ldHJpY3NfYnlfY2F0ZWdvcnkgPSB7fQogICAgICAgIGZvciBtZXRyaWMgaW4gbWV0YWRhdGEubWV0cmljczoKICAgICAgICAgICAgY2F0ZWdvcnkgPSBtZXRyaWMuY2F0ZWdvcnkgaWYgbWV0cmljLmNhdGVnb3J5IGVsc2UgIlVuY2F0ZWdvcml6ZWQiCiAgICAgICAgICAgIGlmIGNhdGVnb3J5IG5vdCBpbiBtZXRyaWNzX2J5X2NhdGVnb3J5OgogICAgICAgICAgICAgICAgbWV0cmljc19ieV9jYXRlZ29yeVtjYXRlZ29yeV0gPSBbXQogICAgICAgICAgICBtZXRyaWNzX2J5X2NhdGVnb3J5W2NhdGVnb3J5XS5hcHBlbmQoewogICAgICAgICAgICAgICAgJ2FwaV9uYW1lJzogbWV0cmljLmFwaV9uYW1lLAogICAgICAgICAgICAgICAgJ3VpX25hbWUnOiBtZXRyaWMudWlfbmFtZSwKICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IG1ldHJpYy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICd0eXBlJzogbWV0cmljLnR5cGVfLm5hbWUgaWYgbWV0cmljLnR5cGVfIGVsc2UgJ1VOS05PV04nCiAgICAgICAgICAgIH0pCiAgICAgICAgCiAgICAgICAgZm9yIGNhdGVnb3J5LCBtZXRzIGluIHNvcnRlZChtZXRyaWNzX2J5X2NhdGVnb3J5Lml0ZW1zKCkpOgogICAgICAgICAgICBwcmludChmIlxuW3tjYXRlZ29yeX1dIikKICAgICAgICAgICAgcHJpbnQoIi0iICogODApCiAgICAgICAgICAgIGZvciBtZXQgaW4gc29ydGVkKG1ldHMsIGtleT1sYW1iZGEgeDogeFsnYXBpX25hbWUnXSk6CiAgICAgICAgICAgICAgICB0eXBlX3N0ciA9IGYiW3ttZXRbJ3R5cGUnXX1dIiBpZiBtZXRbJ3R5cGUnXSBlbHNlICIiCiAgICAgICAgICAgICAgICBwcmludChmIiAge21ldFsnYXBpX25hbWUnXTo0MH0gfCB7bWV0Wyd1aV9uYW1lJ106MzB9IHt0eXBlX3N0cn0iKQogICAgICAgICAgICAgICAgaWYgbWV0WydkZXNjcmlwdGlvbiddOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYiICAgIC0+IHttZXRbJ2Rlc2NyaXB0aW9uJ11bOjcwXX0iKQogICAgICAgIAogICAgICAgICMgU2F2ZSB0byBKU09OIGZpbGUgZm9yIHJlZmVyZW5jZQogICAgICAgIG91dHB1dCA9IHsKICAgICAgICAgICAgJ2RpbWVuc2lvbnMnOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJ2FwaV9uYW1lJzogZGltLmFwaV9uYW1lLAogICAgICAgICAgICAgICAgICAgICd1aV9uYW1lJzogZGltLnVpX25hbWUsCiAgICAgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogZGltLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGRpbS5jYXRlZ29yeQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm9yIGRpbSBpbiBtZXRhZGF0YS5kaW1lbnNpb25zCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgICdtZXRyaWNzJzogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICdhcGlfbmFtZSc6IG1ldHJpYy5hcGlfbmFtZSwKICAgICAgICAgICAgICAgICAgICAndWlfbmFtZSc6IG1ldHJpYy51aV9uYW1lLAogICAgICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IG1ldHJpYy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOiBtZXRyaWMuY2F0ZWdvcnksCiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBtZXRyaWMudHlwZV8ubmFtZSBpZiBtZXRyaWMudHlwZV8gZWxzZSBOb25lCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgbWV0cmljIGluIG1ldGFkYXRhLm1ldHJpY3MKICAgICAgICAgICAgXQogICAgICAgIH0KICAgICAgICAKICAgICAgICB3aXRoIG9wZW4oJ2dhNF9tZXRhZGF0YS5qc29uJywgJ3cnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAgICAgICBqc29uLmR1bXAob3V0cHV0LCBmLCBpbmRlbnQ9MiwgZW5zdXJlX2FzY2lpPUZhbHNlKQogICAgICAgIAogICAgICAgIHByaW50KCJcbiIgKyAiPSIgKiA4MCkKICAgICAgICBwcmludChmIk1ldGFkYXRhIHNhdmVkIHRvOiBnYTRfbWV0YWRhdGEuanNvbiIpCiAgICAgICAgcHJpbnQoIj0iICogODApCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJFcnJvciBmZXRjaGluZyBtZXRhZGF0YToge2V9IikKICAgICAgICBpbXBvcnQgdHJhY2ViYWNrCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgbGlzdF9tZXRhZGF0YSgpCgo="}