{"data":"aW1wb3J0IG9zDQpmcm9tIGdvb2dsZS5hbmFseXRpY3MuZGF0YV92MWJldGEgaW1wb3J0IEJldGFBbmFseXRpY3NEYXRhQ2xpZW50DQpmcm9tIGdvb2dsZS5hbmFseXRpY3MuZGF0YV92MWJldGEudHlwZXMgaW1wb3J0ICgNCiAgICBEYXRlUmFuZ2UsDQogICAgRGltZW5zaW9uLA0KICAgIE1ldHJpYywNCiAgICBSdW5SZXBvcnRSZXF1ZXN0LA0KICAgIE9yZGVyQnkNCikNCmltcG9ydCBwYW5kYXMgYXMgcGQNCg0KIyBDT05GSUdVUkFUSU9ODQpQUk9QRVJUWV9JRCA9ICczNjgwMzU5MzQnDQpDUkVERU5USUFMU19GSUxFID0gJ2NyZWRlbnRpYWxzLmpzb24nDQpvcy5lbnZpcm9uWydHT09HTEVfQVBQTElDQVRJT05fQ1JFREVOVElBTFMnXSA9IENSRURFTlRJQUxTX0ZJTEUNCg0KIyBDVVNUT00gREFURVMNClNUQVJUX0RBVEUgPSAnMjAyNS0xMi0wMScNCkVORF9EQVRFID0gJzIwMjUtMTItMTAnDQpSRVBPUlRfTkFNRSA9ICdSZXBvcnRfRGVjXzAxX3RvX0RlY18xMF8yMDI1Lm1kJw0KDQpkZWYgcnVuX3JlcG9ydChjbGllbnQsIGRpbWVuc2lvbnMsIG1ldHJpY3MsIHN0YXJ0X2RhdGUsIGVuZF9kYXRlLCByb3dfbGltaXQ9MTAwMDApOg0KICAgIHJlcXVlc3QgPSBSdW5SZXBvcnRSZXF1ZXN0KA0KICAgICAgICBwcm9wZXJ0eT1mInByb3BlcnRpZXMve1BST1BFUlRZX0lEfSIsDQogICAgICAgIGRpbWVuc2lvbnM9W0RpbWVuc2lvbihuYW1lPWRpbSkgZm9yIGRpbSBpbiBkaW1lbnNpb25zXSwNCiAgICAgICAgbWV0cmljcz1bTWV0cmljKG5hbWU9bWV0KSBmb3IgbWV0IGluIG1ldHJpY3NdLA0KICAgICAgICBkYXRlX3Jhbmdlcz1bRGF0ZVJhbmdlKHN0YXJ0X2RhdGU9c3RhcnRfZGF0ZSwgZW5kX2RhdGU9ZW5kX2RhdGUpXSwNCiAgICAgICAgbGltaXQ9cm93X2xpbWl0DQogICAgKQ0KICAgIHJlc3BvbnNlID0gY2xpZW50LnJ1bl9yZXBvcnQocmVxdWVzdD1yZXF1ZXN0KQ0KDQogICAgZGF0YSA9IFtdDQogICAgZm9yIHJvdyBpbiByZXNwb25zZS5yb3dzOg0KICAgICAgICBpdGVtID0ge30NCiAgICAgICAgZm9yIGksIGRpbSBpbiBlbnVtZXJhdGUoZGltZW5zaW9ucyk6DQogICAgICAgICAgICBpdGVtW2RpbV0gPSByb3cuZGltZW5zaW9uX3ZhbHVlc1tpXS52YWx1ZQ0KICAgICAgICBmb3IgaSwgbWV0IGluIGVudW1lcmF0ZShtZXRyaWNzKToNCiAgICAgICAgICAgIGl0ZW1bbWV0XSA9IHJvdy5tZXRyaWNfdmFsdWVzW2ldLnZhbHVlDQogICAgICAgIGRhdGEuYXBwZW5kKGl0ZW0pDQogICAgDQogICAgcmV0dXJuIHBkLkRhdGFGcmFtZShkYXRhKQ0KDQpkZWYgZm9ybWF0X251bWJlcihudW0pOg0KICAgIG51bSA9IGZsb2F0KG51bSkNCiAgICBpZiBudW0gPj0gMTAwMDAwMDoNCiAgICAgICAgcmV0dXJuIGYie251bS8xMDAwMDAwOi4xZn1NIg0KICAgIGlmIG51bSA+PSAxMDAwOg0KICAgICAgICByZXR1cm4gZiJ7bnVtLzEwMDA6LjFmfUsiDQogICAgcmV0dXJuIGYie251bTouMGZ9Ig0KDQpkZWYgbWFpbigpOg0KICAgIHByaW50KGYiR2VuZXJhdGluZyBDdXN0b20gUmVwb3J0IGZvcjoge1NUQVJUX0RBVEV9IHRvIHtFTkRfREFURX0uLi4iKQ0KICAgIA0KICAgIHRyeToNCiAgICAgICAgY2xpZW50ID0gQmV0YUFuYWx5dGljc0RhdGFDbGllbnQoKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcHJpbnQoZiJFcnJvciBhdXRoZW50aWNhdGluZzoge2V9IikNCiAgICAgICAgcmV0dXJuDQoNCiAgICAjIC0tLSBGRVRDSCBEQVRBIC0tLQ0KICAgIA0KICAgICMgMS4gT3ZlcnZpZXcNCiAgICBkZl9vdmVydmlldyA9IHJ1bl9yZXBvcnQoY2xpZW50LCBbXSwgWydzZXNzaW9ucycsICd0b3RhbFVzZXJzJywgJ3NjcmVlblBhZ2VWaWV3cycsICdib3VuY2VSYXRlJywgJ2F2ZXJhZ2VTZXNzaW9uRHVyYXRpb24nLCAnZW5nYWdlbWVudFJhdGUnXSwgU1RBUlRfREFURSwgRU5EX0RBVEUpDQogICAgDQogICAgIyAyLiBTb3VyY2VzDQogICAgZGZfc291cmNlcyA9IHJ1bl9yZXBvcnQoY2xpZW50LCBbJ3Nlc3Npb25Tb3VyY2VNZWRpdW0nXSwgWydzZXNzaW9ucyddLCBTVEFSVF9EQVRFLCBFTkRfREFURSkNCiAgICANCiAgICAjIDMuIFBhZ2VzDQogICAgZGZfcGFnZXMgPSBydW5fcmVwb3J0KGNsaWVudCwgWydwYWdlUGF0aCcsICdwYWdlVGl0bGUnXSwgWydzY3JlZW5QYWdlVmlld3MnXSwgU1RBUlRfREFURSwgRU5EX0RBVEUpDQogICAgDQogICAgIyA0LiBDaXRpZXMNCiAgICBkZl9jaXRpZXMgPSBydW5fcmVwb3J0KGNsaWVudCwgWydjaXR5J10sIFsnc2Vzc2lvbnMnXSwgU1RBUlRfREFURSwgRU5EX0RBVEUpDQoNCiAgICAjIDUuIEV2ZW50cyAoRm9yIExlYWRzKQ0KICAgIGRmX2V2ZW50cyA9IHJ1bl9yZXBvcnQoY2xpZW50LCBbJ2V2ZW50TmFtZSddLCBbJ2V2ZW50Q291bnQnXSwgU1RBUlRfREFURSwgRU5EX0RBVEUpDQoNCiAgICAjIC0tLSBQUk9DRVNTIERBVEEgLS0tDQogICAgDQogICAgaWYgbm90IGRmX292ZXJ2aWV3LmVtcHR5Og0KICAgICAgICBzdGF0cyA9IGRmX292ZXJ2aWV3Lmlsb2NbMF0NCiAgICAgICAgc2Vzc2lvbnMgPSBmbG9hdChzdGF0c1snc2Vzc2lvbnMnXSkNCiAgICAgICAgdXNlcnMgPSBmbG9hdChzdGF0c1sndG90YWxVc2VycyddKQ0KICAgICAgICB2aWV3cyA9IGZsb2F0KHN0YXRzWydzY3JlZW5QYWdlVmlld3MnXSkNCiAgICAgICAgYXZnX2R1cmF0aW9uID0gZmxvYXQoc3RhdHNbJ2F2ZXJhZ2VTZXNzaW9uRHVyYXRpb24nXSkNCiAgICAgICAgZW5nYWdlbWVudF9yYXRlID0gZmxvYXQoc3RhdHNbJ2VuZ2FnZW1lbnRSYXRlJ10pICogMTAwDQogICAgZWxzZToNCiAgICAgICAgc2Vzc2lvbnMgPSB1c2VycyA9IHZpZXdzID0gYXZnX2R1cmF0aW9uID0gZW5nYWdlbWVudF9yYXRlID0gMA0KDQogICAgIyBUb3AgU291cmNlcw0KICAgIGlmIG5vdCBkZl9zb3VyY2VzLmVtcHR5Og0KICAgICAgICBkZl9zb3VyY2VzWydzZXNzaW9ucyddID0gZGZfc291cmNlc1snc2Vzc2lvbnMnXS5hc3R5cGUoaW50KQ0KICAgICAgICB0b3Bfc291cmNlcyA9IGRmX3NvdXJjZXMuc29ydF92YWx1ZXMoJ3Nlc3Npb25zJywgYXNjZW5kaW5nPUZhbHNlKS5oZWFkKDUpDQogICAgICAgIHRvdGFsX3NvdXJjZV9zZXNzaW9ucyA9IGRmX3NvdXJjZXNbJ3Nlc3Npb25zJ10uc3VtKCkNCiAgICAgICAgdG9wX3NvdXJjZXNbJ3BjdCddID0gKHRvcF9zb3VyY2VzWydzZXNzaW9ucyddIC8gdG90YWxfc291cmNlX3Nlc3Npb25zKSAqIDEwMA0KICAgIGVsc2U6DQogICAgICAgIHRvcF9zb3VyY2VzID0gcGQuRGF0YUZyYW1lKCkNCg0KICAgICMgVG9wIFBhZ2VzICYgUHJvZHVjdHMNCiAgICB0b3BfcGFnZXMgPSBwZC5EYXRhRnJhbWUoKQ0KICAgIHRvcF9wcm9kdWN0cyA9IHBkLkRhdGFGcmFtZSgpDQogICAgDQogICAgaWYgbm90IGRmX3BhZ2VzLmVtcHR5Og0KICAgICAgICBkZl9wYWdlc1snc2NyZWVuUGFnZVZpZXdzJ10gPSBkZl9wYWdlc1snc2NyZWVuUGFnZVZpZXdzJ10uYXN0eXBlKGludCkNCiAgICAgICAgdG9wX3BhZ2VzID0gZGZfcGFnZXMuc29ydF92YWx1ZXMoJ3NjcmVlblBhZ2VWaWV3cycsIGFzY2VuZGluZz1GYWxzZSkuaGVhZCgxMCkNCiAgICAgICAgDQogICAgICAgICMgRmlsdGVyIGZvciBQcm9kdWN0cw0KICAgICAgICBwcm9kdWN0X3BhZ2VzID0gZGZfcGFnZXNbZGZfcGFnZXNbJ3BhZ2VQYXRoJ10uc3RyLmNvbnRhaW5zKCcvcHJvZHVjdC8nLCBjYXNlPUZhbHNlKSB8IGRmX3BhZ2VzWydwYWdlUGF0aCddLnN0ci5jb250YWlucygnL3Byb2R1Y3QtY2F0ZWdvcnkvJywgY2FzZT1GYWxzZSldDQogICAgICAgIHRvcF9wcm9kdWN0cyA9IHByb2R1Y3RfcGFnZXMuc29ydF92YWx1ZXMoJ3NjcmVlblBhZ2VWaWV3cycsIGFzY2VuZGluZz1GYWxzZSkuaGVhZCg1KQ0KICAgIGVsc2U6DQogICAgICAgIHRvcF9wYWdlcyA9IHBkLkRhdGFGcmFtZSgpDQoNCiAgICAjIExlYWQgRXZlbnRzDQogICAgZGlyZWN0X2lucXVpcmllcyA9IDANCiAgICByZWZlcnJhbF9pbnRlbnQgPSAwDQogICAgDQogICAgaWYgbm90IGRmX2V2ZW50cy5lbXB0eToNCiAgICAgICAgZGZfZXZlbnRzWydldmVudENvdW50J10gPSBkZl9ldmVudHNbJ2V2ZW50Q291bnQnXS5hc3R5cGUoaW50KQ0KICAgICAgICAjIERpcmVjdCBJbnF1aXJpZXMNCiAgICAgICAgZm9ybXMgPSBkZl9ldmVudHNbZGZfZXZlbnRzWydldmVudE5hbWUnXSA9PSAnZ2VuZXJhdGVfbGVhZCddWydldmVudENvdW50J10uc3VtKCkNCiAgICAgICAgcGhvbmVzID0gZGZfZXZlbnRzW2RmX2V2ZW50c1snZXZlbnROYW1lJ10gPT0gJ2NsaWNrX3Bob25lJ11bJ2V2ZW50Q291bnQnXS5zdW0oKQ0KICAgICAgICBlbWFpbHMgPSBkZl9ldmVudHNbZGZfZXZlbnRzWydldmVudE5hbWUnXSA9PSAnY2xpY2tfZW1haWwnXVsnZXZlbnRDb3VudCddLnN1bSgpDQogICAgICAgIGRpcmVjdF9pbnF1aXJpZXMgPSBpbnQoZm9ybXMgKyBwaG9uZXMgKyBlbWFpbHMpDQogICAgICAgIA0KICAgICAgICAjIFJlZmVycmFsIEludGVudA0KICAgICAgICBidXlzID0gZGZfZXZlbnRzW2RmX2V2ZW50c1snZXZlbnROYW1lJ10gPT0gJ2NsaWNrX2J1eV9vbmxpbmUnXVsnZXZlbnRDb3VudCddLnN1bSgpDQogICAgICAgIHJlZmVycmFsX2ludGVudCA9IGludChidXlzKQ0KDQogICAgIyBUb3AgQ2l0aWVzDQogICAgaWYgbm90IGRmX2NpdGllcy5lbXB0eToNCiAgICAgICAgZGZfY2l0aWVzWydzZXNzaW9ucyddID0gZGZfY2l0aWVzWydzZXNzaW9ucyddLmFzdHlwZShpbnQpDQogICAgICAgIHRvcF9jaXRpZXMgPSBkZl9jaXRpZXMuc29ydF92YWx1ZXMoJ3Nlc3Npb25zJywgYXNjZW5kaW5nPUZhbHNlKS5oZWFkKDUpDQogICAgICAgIHRvdGFsX2NpdHlfc2Vzc2lvbnMgPSBkZl9jaXRpZXNbJ3Nlc3Npb25zJ10uc3VtKCkNCiAgICAgICAgdG9wX2NpdGllc1sncGN0J10gPSAodG9wX2NpdGllc1snc2Vzc2lvbnMnXSAvIHRvdGFsX2NpdHlfc2Vzc2lvbnMpICogMTAwDQogICAgZWxzZToNCiAgICAgICAgdG9wX2NpdGllcyA9IHBkLkRhdGFGcmFtZSgpDQoNCiAgICAjIC0tLSBHRU5FUkFURSBNQVJLRE9XTiBSRVBPUlQgLS0tDQogICAgDQogICAgd2l0aCBvcGVuKFJFUE9SVF9OQU1FLCAndycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGY6DQogICAgICAgIGYud3JpdGUoZiIjIEN1c3RvbSBBbmFseXRpY3MgUmVwb3J0OiBEZWMgMSAtIERlYyAxMCwgMjAyNVxuIikNCiAgICAgICAgZi53cml0ZShmIioqUGVyaW9kOioqIHtTVEFSVF9EQVRFfSB0byB7RU5EX0RBVEV9XG5cbiIpDQogICAgICAgIA0KICAgICAgICBmLndyaXRlKCIjIyAxLiBFeGVjdXRpdmUgU3VtbWFyeVxuIikNCiAgICAgICAgZi53cml0ZShmIi0gKipUb3RhbCBTZXNzaW9uczoqKiB7Zm9ybWF0X251bWJlcihzZXNzaW9ucyl9XG4iKQ0KICAgICAgICBmLndyaXRlKGYiLSAqKlRvdGFsIFBhZ2UgVmlld3M6Kioge2Zvcm1hdF9udW1iZXIodmlld3MpfVxuIikNCiAgICAgICAgZi53cml0ZShmIi0gKipUb3RhbCBVc2VyczoqKiB7Zm9ybWF0X251bWJlcih1c2Vycyl9XG4iKQ0KICAgICAgICBmLndyaXRlKGYiLSAqKkRpcmVjdCBJbnF1aXJpZXMgKEZvcm1zL1Bob25lKToqKiB7ZGlyZWN0X2lucXVpcmllc31cbiIpDQogICAgICAgIGYud3JpdGUoZiItICoqUmVmZXJyYWwgSW50ZW50IChCdXkgT25saW5lKToqKiB7cmVmZXJyYWxfaW50ZW50fVxuIikNCiAgICAgICAgZi53cml0ZShmIi0gKipBdmcuIFNlc3Npb24gRHVyYXRpb246Kioge2F2Z19kdXJhdGlvbjouMGZ9IHNlY29uZHNcbiIpDQogICAgICAgIGYud3JpdGUoZiItICoqRW5nYWdlbWVudCBSYXRlOioqIHtlbmdhZ2VtZW50X3JhdGU6LjFmfSVcblxuIikNCiAgICAgICAgDQogICAgICAgIGYud3JpdGUoIiMjIDIuIFRyYWZmaWMgU291cmNlc1xuIikNCiAgICAgICAgaWYgbm90IHRvcF9zb3VyY2VzLmVtcHR5Og0KICAgICAgICAgICAgZm9yIF8sIHJvdyBpbiB0b3Bfc291cmNlcy5pdGVycm93cygpOg0KICAgICAgICAgICAgICAgIGYud3JpdGUoZiItICoqe3Jvd1snc2Vzc2lvblNvdXJjZU1lZGl1bSddfToqKiB7cm93WydwY3QnXTouMWZ9JSAoe2Zvcm1hdF9udW1iZXIocm93WydzZXNzaW9ucyddKX0pXG4iKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgZi53cml0ZSgiTm8gc291cmNlIGRhdGEgYXZhaWxhYmxlLlxuIikNCiAgICAgICAgZi53cml0ZSgiXG4iKQ0KICAgICAgICANCiAgICAgICAgZi53cml0ZSgiIyMgMy4gTW9zdCBWaXNpdGVkIFBhZ2VzXG4iKQ0KICAgICAgICBpZiBub3QgdG9wX3BhZ2VzLmVtcHR5Og0KICAgICAgICAgICAgZm9yIF8sIHJvdyBpbiB0b3BfcGFnZXMuaXRlcnJvd3MoKToNCiAgICAgICAgICAgICAgICBmLndyaXRlKGYiMS4gKip7cm93WydwYWdlVGl0bGUnXX0qKiAoYHtyb3dbJ3BhZ2VQYXRoJ119YCkgLSB7Zm9ybWF0X251bWJlcihyb3dbJ3NjcmVlblBhZ2VWaWV3cyddKX0gdmlld3NcbiIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBmLndyaXRlKCJObyBwYWdlIGRhdGEgYXZhaWxhYmxlLlxuIikNCiAgICAgICAgZi53cml0ZSgiXG4iKQ0KICAgICAgICANCiAgICAgICAgZi53cml0ZSgiIyMgNC4gVG9wIFByb2R1Y3RzXG4iKQ0KICAgICAgICBpZiBub3QgdG9wX3Byb2R1Y3RzLmVtcHR5Og0KICAgICAgICAgICAgZm9yIF8sIHJvdyBpbiB0b3BfcHJvZHVjdHMuaXRlcnJvd3MoKToNCiAgICAgICAgICAgICAgICBmLndyaXRlKGYiMS4gKip7cm93WydwYWdlVGl0bGUnXX0qKiAtIHtmb3JtYXRfbnVtYmVyKHJvd1snc2NyZWVuUGFnZVZpZXdzJ10pfSB2aWV3c1xuIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGYud3JpdGUoIk5vIHByb2R1Y3QgcGFnZSBkYXRhIGZvdW5kLlxuIikNCiAgICAgICAgZi53cml0ZSgiXG4iKQ0KICAgICAgICANCiAgICAgICAgZi53cml0ZSgiIyMgNS4gVG9wIENpdGllc1xuIikNCiAgICAgICAgaWYgbm90IHRvcF9jaXRpZXMuZW1wdHk6DQogICAgICAgICAgICBmb3IgXywgcm93IGluIHRvcF9jaXRpZXMuaXRlcnJvd3MoKToNCiAgICAgICAgICAgICAgICBmLndyaXRlKGYiLSAqKntyb3dbJ2NpdHknXX06Kioge3Jvd1sncGN0J106LjFmfSVcbiIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBmLndyaXRlKCJObyBjaXR5IGRhdGEgYXZhaWxhYmxlLlxuIikNCg0KICAgIHByaW50KGYiUmVwb3J0IGdlbmVyYXRlZDoge1JFUE9SVF9OQU1FfSIpDQoNCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6DQogICAgbWFpbigpDQo="}